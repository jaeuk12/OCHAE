<?// error_reporting(E_ALL);ini_set("display_errors", 1);class WebServiceController extends Lemon_Controller {
	var $auth = "";		public function notfound(){		echo "not found";	}	
	public function display() {		$this->view->print_('index');	}
	/*	* 전체 틀 공통 포함 파일들	*/	public function commonDefine($type=''){		if($type == "login"){			if(!$this->auth->isLogin()){				throw new Lemon_ScriptException("로그인 후 이용해주세요", "", "back");				exit;			}		}				// 권한		$this->setAuth();		// 헤더/푸터		$this->view->define("index","layout/layout.html");		$this->view->define(array("header"=>"header/header.html",				"footer"=>"footer/footer.html"));				$this->view->assign('windowTitle', $this->config['windowTitle']);	}		/*	 * 관리자 틀 공통 포함 파일들	*/	public function adminDefine($type=''){		// 권한		$this->setAuth();		// 헤더/푸터		$this->view->define("index","layout/admin_layout.html");			if($type == "login"){			$this->view->define(array("header"=>"header/admin_header.html",					"footer"=>"footer/admin_footer.html"));		}		else{			$this->view->define(array("header"=>"header/admin_header.html",					"top_menu"=>"header/admin_top_menu.html",					"footer"=>"footer/admin_footer.html"));		}		$this->view->assign('windowTitle', $this->config['admin_windowTitle']);	}		/*	 * 관리자 iframe 공통 포함 파일들	*/	public function adminIframeDefine(){		// 권한		$this->setAuth();		// 헤더/푸터		$this->view->define("index", "layout/layout_iframe.html");		$this->view->define("header", "header/admin_header.html");		$this->view->assign('windowTitle', $this->config['admin_windowTitle']);	}		/**	 * 로그인 표시 처리	 */	public function setAuth() {		$this->auth = Lemon_Instance::getObject("Lemon_Auth");				$this->view->assign('sess_member_uid', $this->auth->getUID());		$this->view->assign('sess_member_id', $this->auth->getId());		$this->view->assign('sess_member_level', $this->auth->getLevel());		$this->view->assign('sess_member_kind', $this->auth->getKind());		$this->view->assign('sess_member_login', $this->auth->isLogin());		$this->view->assign('sess_member_admin', $this->auth->isAdmin());	}		/*	 * ajax 공통 헤더	 */	function setAjaxHeader($type=''){		header("Content-Type: text/html; charset=UTF-8");		header("Cache-Control: no-cache");		header("Pragma: no-cache");				$referer = parse_url($_SERVER['HTTP_REFERER']);				if($referer['host'] != "local.ochae.com"){			$data['code'] = $this->message['incorrect_access']['code'];			$data['message'] = $this->message['incorrect_access']['message'];							echo json_encode($data);			exit;		}				if($type == "login"){			if(!$this->auth->isLogin()){				$data['code'] = $this->message['need_login']['code'];				$data['message'] = $this->message['need_login']['message'];									echo json_encode($data);				exit;			}		}	}
}

?>